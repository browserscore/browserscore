<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8" />
<title>Browser Score</title>
<link rel="icon" href="ui/logo.svg" id="favicon" />
<link rel="stylesheet" href="ui/css/style.css" />
<script>
	document.documentElement.style.colorScheme = localStorage.getItem('color-scheme-toggle');
</script>
<script src="src/app.js" type="module"></script>

</head>
<body>

<h1>
	<a href="?">
		<small>How does my</small>
		Browser Score?
	</a>
</h1>

<template id="feature-component-template">
	<details v-if="feature.children?.length > 0" class="feature-group" :key="feature.uid" :id="feature.htmlId" ref="details" @toggle="handleToggle">
		<summary class="feature" :class="passclass(feature.score)">
			<support-status :score="feature.score"></support-status>
			<span class="title" v-if="feature.titleHtml" v-html="feature.titleHtml"></span>
			<span class="title" v-else-if="feature.title" v-text="feature.title"></span>
			<code class="title" v-else v-text="feature.code ?? feature.id"></code>

			<a v-if="feature.specLink" :href="feature.specLink" target="_blank" class="badge spec-link" :class="`${feature.spec.org.id}-link`">Spec</a>
			<a v-if="feature.draftLink && feature.draftLink !== feature.specLink" :href="feature.draftLink" target="_blank" class="badge spec-link" :class="`${feature.spec.org.id}-link`">Draft</a>
			<a v-if="feature.mdnLink" :href="feature.mdnLink" target="_blank" class="badge spec-link mdn-link">MDN</a>

			<span class="count" v-if="feature.score.total > 1">{{ feature.score.total }}</span>
		</summary>

		<template v-for="child, index of renderedChildren" :key="feature.getUid('.', index)">
			<bs-feature :feature="child"></bs-feature>
		</template>
	</details>
	<article v-else class="feature" :class="passclass(feature.score)" ref="container">
		<support-status :score="feature.score"></support-status>
		<span class="title" v-if="feature.titleHtml" v-html="feature.titleHtml"></span>
		<span class="title" v-else-if="feature.title" v-text="feature.title"></span>
		<code class="title" v-else v-text="feature.code ?? feature.id"></code>

		<a v-if="feature.specLink" :href="feature.specLink" target="_blank" class="badge spec-link" :class="`${feature.spec.org.id}-link`">Spec</a>
		<a v-if="feature.draftLink && feature.draftLink !== feature.specLink" :href="feature.draftLink" target="_blank" class="badge spec-link" :class="`${feature.spec.org.id}-link`">Draft</a>
		<a v-if="feature.mdnLink" :href="feature.mdnLink" target="_blank" class="badge spec-link mdn-link">MDN</a>

		<span class="prefix" v-if="feature.result?.prefix">{{ feature.result.prefix }}</span>
		<span class="note" v-if="feature.result?.note">{{ feature.result.note }}</span>
	</article>
</template>

<div id="content" v-cloak>
	<color-scheme-toggle></color-scheme-toggle>

	<main id="tests">
		<header>
			<h1>Your browser scores <strong v-content="percent(score)">0%</strong></h1>

			<p>
				<support-status :score="score" ref="supportStatus"></support-status>
				Recognized
				<span :title="`passed ${round(score.passedTests)} out of ${score.totalTests} tests`">
					<strong v-content="round(score.passed)">0</strong>
					out of <strong v-content="round(score.total)">0</strong> features
				</span>
				in <strong v-content="round(score.testTime) + ' ms'">0 ms</strong>
			</p>
		</header>

		<section id="all">
			<details v-for="spec in specs" :key="spec.uid" :id="spec.htmlId" class="spec" open>
				<summary>
					<support-status :score="spec.score"></support-status>
					<h1 class="title">
						<a :href="'#' + spec.htmlId" v-text="spec.title"></a>
						<a v-if="spec.specLink" :href="spec.specLink" target="_blank" class="badge primary spec-link" :class="`${spec.org.id}-link`">
							{{ spec.org.title }}
							<span v-if="spec.link === spec.draftLink">Proposal</span>
						</a>
						<a v-if="spec.specLink && spec.link !== spec.specLink" :href="spec.specLink" target="_blank" class="badge spec-link" :class="`${spec.org.id}-link`">Spec</a>
						<a v-if="spec.draftLink && spec.draftLink !== spec.specLink" :href="spec.draftLink" target="_blank" class="badge spec-link" :class="`${spec.org.id}-link`">Draft</a>
						<a v-if="spec.mdnLink" :href="spec.mdnLink" target="_blank" class="badge spec-link mdn-link">MDN</a>
					</h1>
				</summary>
				<section v-for="features, type in spec.features" :key="spec.getUid('.', type)">
					<h2 v-text="featureTypeTitles[type] ?? type"></h2>
					<bs-feature :feature="feature" v-for="feature in features"></bs-feature>
				</section>
			</details>
		</section>
	</main>

	<aside>
		<carbon-ads params="zoneid=1673&serve=C6AILKT&placement=css3testcom"></carbon-ads>

		<section>
			<h1>Filter</h1>
			<form class="filters">
				<bs-filter label="Status" v-model="filter.status"
				           :values="{'': 'Any except legacy', 'all': 'Any', 'stable': 'Stable', 'experimental': 'Experimental'}"></bs-filter>
				<bs-filter label="Snapshot" v-model="filter.snapshot" with-empty :values="snapshots"></bs-filter>
				<bs-filter label="Standards group" v-model="filter.group" with-empty
				           :values="groups" :get-label="(id, group) => group?.title || id || group"></bs-filter>

				<bs-filter v-if="filter.group === 'csswg'" label="CSS level" v-model="filter.version" with-empty :values="[2.2, 3, 4, 5, 6]"></bs-filter>
			</form>
		</section>

		<section>

			<h1>
				{{ specs.length }} specs tested
				<ui-tooltip>
					<button class="icon" style="--icon: var(--icon-warning)"></button>
					<section class="caution tooltip">
						<p><strong>Caution:</strong>
						This test checks which web platform features the browser recognizes, <em>not</em> whether they are implemented correctly.</p>
					</section>
				</ui-tooltip>

			</h1>
			<ul id="specsTested">
				<li v-for="spec in specs" :key="spec.id" :class="passclass({
					passed: spec.score.passed,
					total: spec.score.total,
				})">
					<support-status :score="spec.score"></support-status>
					<a :href="`#${spec.id}`">{{ spec.title }}</a>
				</li>
			</ul>
			<p>Want more tests? <a href="https://github.com/LeaVerou/css3test" target="_blank">Be my guest!</a></p>
		</section>

		<footer>
			<p>
				Handcrafted by <a href="https://lea.verou.me">Lea Verou</a> and <a href="https://github.com/LeaVerou/css3test/graphs/contributors">friends</a>
				&#10047; <a href="https://github.com/sponsors/LeaVerou">Sponsor</a>
			</p>
		</footer>
	</aside>
</div>

</body>
</html>
